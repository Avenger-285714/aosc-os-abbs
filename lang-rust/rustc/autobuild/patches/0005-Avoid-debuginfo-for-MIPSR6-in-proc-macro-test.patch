From 8704a432eb18086008442e0cec21f8e9ba61c5c0 Mon Sep 17 00:00:00 2001
From: chenx97 <henry.chen@oss.cipunited.com>
Date: Thu, 14 Mar 2024 10:26:17 +0800
Subject: [PATCH 5/5] Avoid debuginfo for MIPSR6 in proc-macro-test

---
 src/tools/rust-analyzer/crates/proc-macro-test/build.rs | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/tools/rust-analyzer/crates/proc-macro-test/build.rs b/src/tools/rust-analyzer/crates/proc-macro-test/build.rs
index 7827157865a..0b8a856d20b 100644
--- a/src/tools/rust-analyzer/crates/proc-macro-test/build.rs
+++ b/src/tools/rust-analyzer/crates/proc-macro-test/build.rs
@@ -69,7 +69,8 @@ fn main() {
         // This can happen when `CARGO_TARGET_DIR` is set or global config forces all cargo
         // instance to use the same target directory.
         .arg("--target-dir")
-        .arg(&target_dir);
+        .arg(&target_dir)
+        .arg("--release");
 
     if let Ok(target) = std::env::var("TARGET") {
         cmd.args(["--target", &target]);
-- 
2.44.0

